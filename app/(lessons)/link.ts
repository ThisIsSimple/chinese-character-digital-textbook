const navigation = [
  { path: "lesson1/01_008_A1", page: 8 }, // 1차시
  { path: "lesson1/01_008_A2", page: 8 },
  { path: "lesson1/01_008_A3", page: 8 },
  { path: "lesson1/01_010_B1", page: 10 },
  { path: "lesson1/01_010_C1", page: 10 },
  { path: "lesson1/01_011_D11", page: 11 },
  { path: "lesson1/01_011_D12", page: 11 },
  { path: "lesson1/01_011_D13", page: 11 },
  { path: "lesson1/01_012_D14", page: 12 },
  { path: "lesson1/01_012_D15", page: 12 },
  { path: "lesson1/14", page: 14 },
  { path: "lesson1/14-1", page: 14 },
  { path: "lesson1/15", page: 15 },
  { path: "lesson1/15-1", page: 15 },
  { path: "lesson1/15-3", page: 15 },
  { path: "lesson1/16", page: 16 },
  { path: "lesson1/16-1", page: 16 },
  { path: "lesson1/24", page: 24 },
  { path: "lesson1/02_016_B1", page: 16 }, // 2차시
  { path: "lesson1/02_016_C1", page: 16 },
  { path: "lesson1/02_016_L1", page: 16 },
  { path: "lesson1/02_017_D11", page: 17 },
  { path: "lesson1/02_017_D12", page: 17 },
  { path: "lesson1/02_017_D13", page: 17 },
  { path: "lesson1/02_018_D21", page: 18 },
  { path: "lesson1/02_018_D31", page: 18 },
  { path: "lesson1/02_019_D41", page: 19 },
  { path: "lesson1/02_019_D42", page: 19 },
  { path: "lesson1/02_019_D43", page: 19 },
  { path: "lesson1/02_020_D51", page: 20 },
  { path: "lesson1/02_021_D52", page: 21 },
  { path: "lesson1/02_022_I1", page: 22 },
  { path: "lesson1/02_022_K1", page: 22 },
  { path: "lesson1/02_023_J1", page: 23 },
  { path: "lesson2/03_024_A1", page: 24 }, // 3차시
  { path: "lesson2/03_024_A2", page: 24 },
  { path: "lesson2/03_024_A3", page: 24 },
  { path: "lesson2/03_026_B1", page: 26 },
  { path: "lesson2/03_026_C1", page: 26 },
  { path: "lesson2/03_027_D1", page: 27 },
  { path: "lesson2/03_028_L1", page: 28 },
  { path: "lesson2/03_028_E1", page: 28 },
  { path: "lesson2/03_030_E2", page: 30 },
  { path: "lesson2/03_032_F1", page: 32 },
  { path: "lesson2/03_032_F2", page: 32 },
  { path: "lesson2/03_033_G1", page: 33 },
  { path: "lesson2/03_033_H1", page: 33 },
  { path: "lesson2/04_034_B1", page: 34 }, // 4차시
  { path: "lesson2/04_034_C1", page: 34 },
  { path: "lesson2/04_035_D1", page: 35 },
  { path: "lesson2/04_036_L1", page: 36 },
  { path: "lesson2/04_036_E1", page: 36 },
  { path: "lesson2/04_038_E2", page: 38 },
  { path: "lesson2/04_040_F1", page: 40 },
  { path: "lesson2/04_040_F2", page: 40 },
  { path: "lesson2/04_041_G1", page: 41 },
  { path: "lesson2/04_041_H1", page: 41 },
  { path: "lesson2/05_042_B1", page: 42 }, // 5차시
  { path: "lesson2/05_042_C1", page: 42 },
  { path: "lesson2/05_043_D1", page: 43 },
  { path: "lesson2/05_044_L1", page: 44 },
  { path: "lesson2/05_044_E1", page: 44 },
  { path: "lesson2/05_046_F1", page: 46 },
  { path: "lesson2/05_046_F2", page: 46 },
  { path: "lesson2/05_047_G1", page: 47 },
  { path: "lesson2/05_047_H1", page: 47 },
  { path: "lesson2/06_048_B1", page: 48 }, // 6차시
  { path: "lesson2/06_048_C1", page: 48 },
  { path: "lesson2/06_049_D1", page: 49 },
  { path: "lesson2/06_050_L1", page: 50 },
  { path: "lesson2/06_050_E1", page: 50 },
  { path: "lesson2/06_052_F1", page: 52 },
  { path: "lesson2/06_052_F2", page: 52 },
  { path: "lesson2/06_053_G1", page: 53 },
  { path: "lesson2/06_054_I1", page: 54 }, // 2단원 마무리
  { path: "lesson2/06_055_J1", page: 55 }, // 활동하기
  { path: "lesson2/06_056_K1", page: 56 }, // 문제풀기
  { path: "lesson3/07_058_A1", page: 58 }, // 3단원
  { path: "lesson3/07_058_A2", page: 58 },
  { path: "lesson3/07_058_A3", page: 58 },
  { path: "lesson3/07_060_B1", page: 60 }, // 7차시
  { path: "lesson3/07_060_C1", page: 60 },
  { path: "lesson3/07_061_D1", page: 61 },
  { path: "lesson3/07_062_L1", page: 62 },
  { path: "lesson3/07_062_E1", page: 62 },
  { path: "lesson3/07_063_E2", page: 63 },
  { path: "lesson3/07_064_F1", page: 64 },
  { path: "lesson3/07_064_F2", page: 64 },
  { path: "lesson3/07_064_F3", page: 64 },
  { path: "lesson3/07_065_G1", page: 65 },
  { path: "lesson3/07_065_H1", page: 65 },
  { path: "lesson3/08_066_B1", page: 66 }, // 8차시
  { path: "lesson3/08_066_C1", page: 66 },
  { path: "lesson3/08_067_D1", page: 67 },
  { path: "lesson3/08_068_L1", page: 68 },
  { path: "lesson3/08_068_E1", page: 68 },
  { path: "lesson3/08_070_F1", page: 70 },
  { path: "lesson3/08_070_F2", page: 70 },
  { path: "lesson3/08_071_G1", page: 71 },
  { path: "lesson3/08_071_H1", page: 71 },
  { path: "lesson3/09_072_B1", page: 72 }, // 9차시
  { path: "lesson3/10_078_B1", page: 78 }, // 10차시
  { path: "lesson3/10_078_C1", page: 78 },
  { path: "lesson3/10_079_D1", page: 79 },
  { path: "lesson3/10_081_L1", page: 81 },
  { path: "lesson3/10_081_E1", page: 81 },
  { path: "lesson3/10_082_F1", page: 82 },
  { path: "lesson3/10_082_F2", page: 82 },
  { path: "lesson3/10_082_F3", page: 82 },
  { path: "lesson3/10_083_G1", page: 83 },
  { path: "lesson3/10_083_H1", page: 83 },
  { path: "lesson3/10_083_H1", page: 83 }, // 3단원 마무리

  { path: "lesson4/11_088_A1", page: 88 }, // 4단원
  { path: "lesson4/11_088_A2", page: 88 },
  { path: "lesson4/11_088_A3", page: 88 },
  { path: "lesson4/11_090_B1", page: 90 }, // 학습목표
  { path: "lesson4/11_090_C1", page: 90 },
  { path: "lesson4/11_091_D1", page: 91 },
  { path: "lesson4/11_093_L1", page: 93 },
  { path: "lesson4/11_093_E1", page: 93 },
  { path: "lesson4/11_094_F1", page: 94 },
  { path: "lesson4/11_094_F2", page: 94 },
  { path: "lesson4/11_094_F3", page: 94 },
  { path: "lesson4/11_095_G1", page: 95 },
  { path: "lesson4/11_095_H1", page: 95 }, // 11차시 마무리
  { path: "lesson4/12_096_B1", page: 96 }, // 12차시
  { path: "lesson4/12_096_C1", page: 96 },
  { path: "lesson4/12_097_D1", page: 97 },
  { path: "lesson4/12_099_L1", page: 99 },
  { path: "lesson4/12_099_E1", page: 99 },
  { path: "lesson4/12_100_F1", page: 100 },
  { path: "lesson4/12_100_F2", page: 100 },
  { path: "lesson4/12_101_G1", page: 101 },
  { path: "lesson4/12_101_H1", page: 101 }, // 12차시 마무리
  { path: "lesson4/12_102_I1", page: 101 }, // 4단원 정리하기
  { path: "lesson4/12_103_J1", page: 101 },
  { path: "lesson4/12_104_K1", page: 101 }, // 4단원 마무리

  { path: "lesson5/13_106_A1", page: 106 }, // 5단원 시작
  { path: "lesson5/13_106_A2", page: 106 },
  { path: "lesson5/13_106_A3", page: 106 },

  { path: "lesson5/13_108_B1", page: 108 }, // 13차시
  { path: "lesson5/13_108_C1", page: 108 },
  { path: "lesson5/13_109_D1", page: 109 },
  { path: "lesson5/13_111_L1", page: 111 },
  { path: "lesson5/13_111_E1", page: 111 },
  { path: "lesson5/13_111_E2", page: 111 },
  { path: "lesson5/13_112_F1", page: 112 },
  { path: "lesson5/13_112_F2", page: 112 },
  { path: "lesson5/13_113_G1", page: 113 },
  { path: "lesson5/13_113_H1", page: 113 },

  { path: "lesson5/14_114_B1", page: 114 }, // 14차시
  { path: "lesson5/14_114_C1", page: 114 },
  { path: "lesson5/14_115_D1", page: 115 },
  { path: "lesson5/14_117_L1", page: 117 },
  { path: "lesson5/14_117_E1", page: 117 },
  { path: "lesson5/14_117_E2", page: 117 },
  { path: "lesson5/14_118_F1", page: 118 },
  { path: "lesson5/14_118_F2", page: 118 },
  { path: "lesson5/14_118_F3", page: 118 },
  { path: "lesson5/14_119_G1", page: 119 },
  { path: "lesson5/14_119_H1", page: 119 }, // 14차시 마무리

  { path: "lesson5/15_120_B1", page: 120 }, // 15차시
  { path: "lesson5/15_120_C1", page: 120 },
  { path: "lesson5/15_121_D1", page: 121 },
  { path: "lesson5/15_123_L1", page: 123 },
  { path: "lesson5/15_123_E1", page: 123 },
  { path: "lesson5/15_123_E2", page: 123 },
  { path: "lesson5/15_124_F1", page: 124 },
  { path: "lesson5/15_124_F2", page: 124 },
  { path: "lesson5/15_124_F3", page: 124 },
  { path: "lesson5/15_125_G1", page: 125 },
  { path: "lesson5/15_125_H1", page: 125 }, // 15차시 마무리

  { path: "lesson5/16_126_B1", page: 126 }, // 16차시
  { path: "lesson5/16_126_C1", page: 126 },
  { path: "lesson5/16_127_D1", page: 127 },
  { path: "lesson5/16_129_L1", page: 129 },
  { path: "lesson5/16_129_E1", page: 129 },
  { path: "lesson5/16_129_E2", page: 129 },
  { path: "lesson5/16_130_F1", page: 130 },
  { path: "lesson5/16_130_F2", page: 130 },
  { path: "lesson5/16_130_F3", page: 130 },
  { path: "lesson5/16_131_G1", page: 131 },
  { path: "lesson5/16_131_H1", page: 131 }, // 16차시 마무리

  { path: "lesson5/16_132_I1", page: 132 },
  { path: "lesson5/16_133_J1", page: 133 },
  { path: "lesson5/16_134_K1", page: 134 },
];

const extractPathInfo = (pathname: string) => {
  const match = pathname.match(
    /(?:.*\/)?(lesson[12345]\/(?:\d+(?:_\d+)?(?:_[A-Z]\d+)?|\d+(?:-\d+)?))(?:\.html)?$/,
  );
  if (!match) return null;
  const lessonPath = match[1];
  const hasHtmlExt = pathname.endsWith(".html");
  const prefix = pathname.slice(0, pathname.lastIndexOf(lessonPath));

  // 페이지 번호 추출
  // const pageMatch = lessonPath.match(/(\d+)(?:_\d+)?(?:_[A-Z]\d+)?/);
  // const pageNumber = pageMatch ? parseInt(pageMatch[1], 10) : null;
  const pageNumber = findItemByPath(lessonPath)?.page;

  return { lessonPath, hasHtmlExt, prefix, pageNumber };
};

const findAdjacentPage = (pathname: string, direction: "prev" | "next") => {
  const pathInfo = extractPathInfo(pathname);
  if (!pathInfo) return null;
  const { lessonPath, hasHtmlExt, prefix } = pathInfo;
  const currentIndex = navigation.findIndex((item) => item.path === lessonPath);
  if (currentIndex === -1) return null;
  const adjacentIndex =
    direction === "prev" ? currentIndex - 1 : currentIndex + 1;
  if (adjacentIndex < 0 || adjacentIndex >= navigation.length) return null;
  const adjacentPath = navigation[adjacentIndex].path;
  return `${prefix}${adjacentPath}${hasHtmlExt ? ".html" : ""}`;
};

export const getPrevPage = (pathname: string) => {
  return findAdjacentPage(pathname, "prev");
};

export const getNextPage = (pathname: string) => {
  return findAdjacentPage(pathname, "next");
};

export const findPageByNumber = (pageNumber: number) => {
  return navigation.find((item) => item.page === pageNumber);
};

export const findItemByPath = (path: string) => {
  return navigation.find((item) => item.path === path);
};

export const getPageNumberOfPath = (path: string) => {
  return extractPathInfo(path)?.pageNumber;
};
